{
  "name": "poppy-execution",
  "main": "src/index.ts",
  "compatibility_date": "2025-11-05",
  "compatibility_flags": [
    "nodejs_compat",
    "nodejs_compat_populate_process_env"
  ],
  "logpush": false,
  "upload_source_maps": true,
  "observability": {
    "logs": {
      "enabled": true,
      "head_sampling_rate": 1, // 100%
      "invocation_logs": true,
      "persist": true
    },
    "traces": {
      "enabled": true,
      "head_sampling_rate": 1,
      "persist": true
    }
  },
  "migrations": [
    {
      "tag": "v1",
      "new_sqlite_classes": ["ExecutionAgent"]
    }
  ],
  "vars": {
    "NODE_ENV": "production",
    "NAME": "poppy-execution"
  },
  "env": {
    "production": {
      "name": "poppy-execution-production",
      "durable_objects": {
        "bindings": [
          {
            "name": "EXECUTION_AGENT",
            "class_name": "ExecutionAgent"
          }
        ]
      },
      "hyperdrive": [
        {
          "binding": "HYPERDRIVE",
          "id": "125ed9ac17a64039aed9e68eb11d38cd",
          "localConnectionString": "postgresql://postgres:postgres@127.0.0.1:54322/postgres"
        }
      ],
      "vars": {
        "NODE_ENV": "production",
        "NAME": "poppy-execution"
      }
    },
    "staging": {
      "name": "poppy-execution-staging",
      "durable_objects": {
        "bindings": [
          {
            "name": "EXECUTION_AGENT",
            "class_name": "ExecutionAgent"
          }
        ]
      },
      "hyperdrive": [
        {
          "binding": "HYPERDRIVE",
          "id": "91f63bb5e350490baae83bfe55e249f2",
          "localConnectionString": "postgresql://postgres:postgres@127.0.0.1:54322/postgres"
        }
      ],
      "vars": {
        "NODE_ENV": "staging",
        "NAME": "poppy-execution"
      }
    }
  }
}
